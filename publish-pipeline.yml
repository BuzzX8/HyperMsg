pool:
  vmImage: ubuntu-latest

steps:
- task: DotNetCoreCLI@2
  name: Build
  inputs:
    command: 'build'
- task: DotNetCoreCLI@2
  name: Pack
  inputs:
    command: 'pack'
    packagesToPack: '**/HyperMsg.Core.csproj'
    nobuild: true
    includesymbols: true
    includesource: true
    versioningScheme: 'byEnvVar'
    versionEnvVar: 'PackageVersion'
- task: DotNetCoreCLI@2
  name: Publish
  inputs:    
    command: 'push'
    packagesToPush: '$(Build.ArtifactStagingDirectory)/HyperMsg.Core*.nupkg'
    nuGetFeedType: 'internal'
    publishVstsFeed: 'e9963e23-1943-4341-aee1-8f18b46c64ed/919c2584-ea9a-45f0-b907-a26b4797a760'